require! {
	fs
	node-path: path

	'loader'
}



export read = (path) -> fs.readFileSync path, 'utf-8'

export class Importer
	(@module) ~>
		@modDir = node-path.dirname @module.filename
		# @loader = loader.Loader @module

	resolve: (filename) -> node-path.join @modDir, filename
	readFromModuleDir: (filename) ->
		content = read @resolve filename
		content.trim()

	catch: -> @readFromModuleDir 'catch.html'
	desc: -> @readFromModuleDir 'desc.html'
	ex: -> @readFromModuleDir 'ex.hsp'
	sample: -> @readFromModuleDir 'sample.hsp'

	entries: (submodules) ->
		entries = []
		for submodule in submodules
			# entries ++= @loader.reload submodule
			# loader.clearCache!
			# entries ++= @module.require submodule
			entries ++= require @resolve submodule

		entries
